<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FC26 Transfer Tracker</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="container">
      <div class="card-head" style="margin:0; padding:0;">
        <div>
          <h1 id="save-title">FC26 Transfer Tracker</h1>
          <p class="sub" id="save-sub">Track transfer cost, sale, profit and ROI per player. Data is saved to AWS (your account).</p>
        </div>
        <div class="actions">
          <a id="back-to-dashboard" class="btn btn-secondary" href="./index.html">Back to dashboard</a>
          <button id="edit-save-title" class="btn btn-secondary" type="button">Edit title</button>
          <button id="btn-signout" type="button">Sign out</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card" id="edit-card">
      <div class="card-head">
        <h2>Add / Edit player</h2>
        <div class="actions">
          <div class="segmented" role="tablist" aria-label="Currency">
            <button class="seg-btn active" data-currency="GBP" type="button">£</button>
            <button class="seg-btn" data-currency="EUR" type="button">€</button>
            <button class="seg-btn" data-currency="USD" type="button">$</button>
          </div>
          <button id="btn-scan" class="btn btn-secondary" type="button">Scan from camera</button>
          <button id="btn-clear" class="btn btn-secondary" type="button">Clear</button>

        </div>
      </div>

      <div id="edit-player-name" class="edit-name">New Player</div>

      <form id="player-form" autocomplete="off">
        <div class="grid">
          <label>
            Forename
            <input id="f-first" required placeholder="New" />
          </label>

          <label>
            Surname
            <input id="f-surname" required placeholder="Player" />
          </label>

          <label>
            Seniority
            <select id="f-seniority">
              <option value="Senior" selected>Senior</option>
              <option value="Youth">Youth</option>
              <option value="Watchlist">Watchlist</option>
            </select>
          </label>

          <label>
            Homegrown?
            <input id="f-homegrown" type="checkbox" />
          </label>

          <label>
            Position
            <select id="f-pos" required>
              <option value="" selected disabled>Select…</option>
              <option value="GK">GK</option>
              <option value="RB">RB</option>
              <option value="CB">CB</option>
              <option value="LB">LB</option>
              <option value="CDM">CDM</option>
              <option value="CM">CM</option>
              <option value="CAM">CAM</option>
              <option value="LM">LM</option>
              <option value="RM">RM</option>
              <option value="ST">ST</option>
            </select>
          </label>

          <label>
            Strong foot
            <select id="f-foot" required>
             <option value="R" selected>Right</option>
             <option value="L">Left</option>
           </select>
          </label>

          <label>
            Overall
            <input id="f-intl" type="number" min="1" max="99" step="1" required placeholder="65" />
          </label>

          <label>
            Potential Min.
            <input id="f-potmin" type="number" min="1" max="99" step="1" required placeholder="65" />
          </label>

          <label>
            Potential Max.
            <input id="f-potmax" type="number" min="1" max="99" step="1" required placeholder="90" />
          </label>

          <label>
            Current player?
            <select id="f-active">
              <option value="Y" selected>Yes</option>
              <option value="N">No (Sold)</option>
            </select>
          </label>

          <label>
            Cost
            <input id="f-cost" type="text" inputmode="numeric" placeholder="0" />
          </label>

          <label>
            Sale
            <input id="f-sale" type="text" inputmode="numeric" placeholder="0" />
          </label>
        </div>
      </form>

        <div class="actions">
          <button id="btn-cancel" class="btn btn-secondary hidden" type="button">Cancel</button>
          <button id="btn-add" class="btn btn-primary" type="button">Add player</button>
          <button id="btn-update" class="btn btn-primary hidden" type="button">Update player</button>
        </div>

    </section>

    <section class="card">
      <div class="card-head">
        <h2>Totals</h2>
        <div class="actions">
          <div class="segmented" role="tablist" aria-label="Seniority filter">
            <button class="seg-btn active" data-seniority="Senior" type="button">Senior</button>
            <button class="seg-btn" data-seniority="Youth" type="button">Youth</button>
            <button class="seg-btn" data-seniority="Watchlist" type="button">Watchlist</button>
            <button class="seg-btn" data-seniority="All" type="button">All</button>
          </div>
          <button id="btn-export" class="btn btn-secondary hidden" type="button">Export JSON</button>
          <label class="btn btn-secondary file-btn hidden" for="import-file">Import JSON</label>
          <input id="import-file" class="hidden" type="file" accept="application/json" />
          <button id="btn-reset" class="btn btn-danger hidden" type="button">Reset all</button>
        </div>
      </div>

      <div class="totals">
        <div class="total">
          <div class="label">Total spend</div>
          <div id="t-cost" class="value val-neg">£0</div>
        </div>
        <div class="total">
          <div class="label">Total sales</div>
          <div id="t-sale" class="value val-pos">£0</div>
        </div>
        <div class="total">
          <div class="label">Total profit</div>
          <div id="t-profit" class="value">£0</div>
        </div>
        <div class="total">
          <div class="label">Average ROI</div>
          <div id="t-roi" class="value">—</div>
        </div>
      </div>
      <p class="subtle">Average ROI is computed over players with a non-zero cost and a sale value.</p>
    </section>

    <section class="card">
      <div class="card-head">
        <h2>Players</h2>
        <div class="actions">
          <div class="segmented" role="tablist" aria-label="Seniority filter">
            <button class="seg-btn active" data-seniority="Senior" type="button">Senior</button>
            <button class="seg-btn" data-seniority="Youth" type="button">Youth</button>
            <button class="seg-btn" data-seniority="Watchlist" type="button">Watchlist</button>
            <button class="seg-btn" data-seniority="All" type="button">All</button>
          </div>
          
          <select id="filter-active" class="select">
            <option value="ALL" selected>All</option>
            <option value="Y">Active (Y)</option>
            <option value="N">Sold (N)</option>
          </select>
        </div>
      </div>
      <input id="search" class="search" placeholder="Search name / position…" />
      <label class="toggle">
        <input type="checkbox" id="toggle-ex" checked>
        <span>Show ex-players</span>
      </label>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th data-sort="player" class="sortable">Player</th>
              <th data-sort="position" class="sortable">Pos</th>
              <th data-sort="foot" class="sortable">Foot</th>
              <th data-sort="ovr" class="sortable">Ovr</th>
              <th data-sort="potential" class="sortable">Pot</th>
              <th data-sort="status" class="sortable">Status</th>
              <th data-sort="seniority" class="sortable">Rank</th>
              <th data-sort="homegrown" class="sortable">HG</th>
              <th data-sort="cost" class="num sortable">Cost</th>
              <th data-sort="sale" class="num sortable">Sale</th>
              <th data-sort="profit" class="num sortable">Profit</th>
              <th data-sort="roi" class="num sortable">ROI</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </section>

    <section class="card" id="pitch-card">
  <div class="card-head">
    <h2>Squad on pitch</h2>

    <div class="actions">
      <div class="segmented" role="tablist" aria-label="Pitch sort">
        <button class="seg-btn active" data-pitch-sort="ovr" type="button">Overall</button>
        <button class="seg-btn" data-pitch-sort="potential" type="button">Potential</button>
      </div>

      <select id="formation-select" class="select" aria-label="Formation">
       <!-- options injected by JS from formations.js -->
      </select>

      <div class="segmented" role="tablist" aria-label="Pitch seniority">
        <button class="seg-btn active" data-pitch-seniority="Senior" type="button">Senior</button>
        <button class="seg-btn" data-pitch-seniority="Youth" type="button">Youth</button>
        <button class="seg-btn" data-pitch-seniority="All" type="button">Senior+Youth</button>
        <button class="seg-btn" data-pitch-seniority="Homegrown" type="button">Homegrown</button>
      </div>

      <label class="toggle" style="margin-left:8px;">
        <input type="checkbox" id="pitch-watchlist">
        <span>Include watchlist</span>
      </label>
    </div>

  </div>

  <p class="subtle">
    Uses the same Seniority / Active / Search filters as the table above. Players are grouped by position.
  </p>

  <div class="pitch-wrap">
    <div class="pitch" id="pitch">
      <!-- JS injects position panels here -->
    </div>
  </div>
</section>

<!-- Scan modal -->
<div id="scan-modal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Scan player card">
  <div class="modal-backdrop" data-scan-close></div>
  <div class="modal-panel">
    <div class="modal-head">
      <h3 style="margin:0;">Scan player</h3>
      <button class="btn btn-secondary" type="button" data-scan-close>Close</button>
    </div>

    <p class="subtle" style="margin-top:8px;">
      Point your camera at the player overview screen, then tap Capture.
    </p>

    <video id="scan-video" autoplay playsinline style="width:100%; border-radius:12px; background:#000;"></video>
    <canvas id="scan-canvas" class="hidden"></canvas>

    <div style="display:flex; gap:8px; margin-top:10px; align-items:center; flex-wrap:wrap;">
      <button id="btn-scan-capture" class="btn btn-primary" type="button">Capture</button>
      <button id="btn-scan-apply" class="btn btn-secondary hidden" type="button">Apply to form</button>
      <div id="scan-status" class="subtle" style="margin-left:auto;">Camera idle</div>
    </div>

    <pre id="scan-debug" class="hidden" style="white-space:pre-wrap; margin-top:10px;"></pre>
  </div>
</div>


    <footer class="footer">
      <p>Tip: your saves are tied to your login, so you can access them on any device.</p>
    </footer>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
